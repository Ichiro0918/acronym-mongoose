{"version":3,"sources":["../../src/services/acronym.service.ts"],"sourcesContent":["import { CreateDataDto } from '@dtos/users.dto';\nimport { HttpException } from '@exceptions/HttpException';\nimport acronymModel from '@models/acronym.model';\nimport { Acronym } from '@interfaces/acronym.interface';\n\nclass AcronymService {\n  public acronym = acronymModel;\n\n  public async findDataByFilter(from: number, limit: number, search: string): Promise<Acronym> {\n    if (from < 0 || limit < 0) {\n      throw new HttpException(409, 'Params invalid');\n    }\n    if (search === 'undefined') {\n      search = '';\n    }\n    const findAcronym: Acronym = await this.acronym\n      .find({ acronym: { $regex: search } })\n      .skip(from)\n      .limit(limit);\n    if (!findAcronym) throw new HttpException(409, \"Acronym doesn't exist\");\n\n    return findAcronym;\n  }\n\n  public async createData(data: CreateDataDto): Promise<Acronym> {\n    const findAcronym: Acronym = await this.acronym.findOne({ acronym: data.acronym });\n    if (findAcronym) throw new HttpException(409, `This acronym ${data.acronym} already exists`);\n\n    const createData: Acronym = await this.acronym.create({ ...data });\n\n    return createData;\n  }\n\n  public async updateData(acronym: string, definition: string): Promise<Acronym[]> {\n    if (acronym) {\n      const findData: Acronym = await this.acronym.findOne({ acronym: acronym });\n      if (findData && findData.acronym != acronym) throw new HttpException(409, `This acronym ${acronym} already exists`);\n    }\n\n    const updateDataByAcronym: Acronym[] = await this.acronym.update({ acronym: acronym }, { definition: definition });\n    if (!updateDataByAcronym) throw new HttpException(409, \"Acronym doesn't exist\");\n\n    return updateDataByAcronym;\n  }\n\n  public async deleteData(acronym: string): Promise<any[]> {\n    const deleteDataByAcronym: Acronym[] = await this.acronym.remove({ acronym: acronym });\n    if (!deleteDataByAcronym) throw new HttpException(409, \"Acronym doesn't exist\");\n\n    return deleteDataByAcronym;\n  }\n}\n\nexport default AcronymService;\n"],"names":["AcronymService","findDataByFilter","from","limit","search","HttpException","findAcronym","acronym","find","$regex","skip","createData","data","findOne","create","updateData","definition","findData","updateDataByAcronym","update","deleteData","deleteDataByAcronym","remove","acronymModel"],"mappings":"AAAA;;;;+BAqDA,SAA8B;;aAA9B,QAA8B;;+BApDA,6BAA2B;qDAChC,yBAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGhD,IAAA,AAAMA,cAAc,GAApB,MAAMA,cAAc;UAGLC,gBAAgB,CAACC,IAAY,EAAEC,KAAa,EAAEC,MAAc,EAAoB;QAC3F,IAAIF,IAAI,GAAG,CAAC,IAAIC,KAAK,GAAG,CAAC,EAAE;YACzB,MAAM,IAAIE,cAAa,cAAA,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;QACjD,CAAC;QACD,IAAID,MAAM,KAAK,WAAW,EAAE;YAC1BA,MAAM,GAAG,EAAE,CAAC;QACd,CAAC;QACD,MAAME,WAAW,GAAY,MAAM,IAAI,CAACC,OAAO,CAC5CC,IAAI,CAAC;YAAED,OAAO,EAAE;gBAAEE,MAAM,EAAEL,MAAM;aAAE;SAAE,CAAC,CACrCM,IAAI,CAACR,IAAI,CAAC,CACVC,KAAK,CAACA,KAAK,CAAC,AAAC;QAChB,IAAI,CAACG,WAAW,EAAE,MAAM,IAAID,cAAa,cAAA,CAAC,GAAG,EAAE,uBAAuB,CAAC,CAAC;QAExE,OAAOC,WAAW,CAAC;IACrB;UAEaK,UAAU,CAACC,IAAmB,EAAoB;QAC7D,MAAMN,WAAW,GAAY,MAAM,IAAI,CAACC,OAAO,CAACM,OAAO,CAAC;YAAEN,OAAO,EAAEK,IAAI,CAACL,OAAO;SAAE,CAAC,AAAC;QACnF,IAAID,WAAW,EAAE,MAAM,IAAID,cAAa,cAAA,CAAC,GAAG,EAAE,CAAC,aAAa,EAAEO,IAAI,CAACL,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;QAE7F,MAAMI,UAAU,GAAY,MAAM,IAAI,CAACJ,OAAO,CAACO,MAAM,CAAC,kBAAKF,IAAI,CAAE,CAAC,AAAC;QAEnE,OAAOD,UAAU,CAAC;IACpB;UAEaI,UAAU,CAACR,OAAe,EAAES,UAAkB,EAAsB;QAC/E,IAAIT,OAAO,EAAE;YACX,MAAMU,QAAQ,GAAY,MAAM,IAAI,CAACV,OAAO,CAACM,OAAO,CAAC;gBAAEN,OAAO,EAAEA,OAAO;aAAE,CAAC,AAAC;YAC3E,IAAIU,QAAQ,IAAIA,QAAQ,CAACV,OAAO,IAAIA,OAAO,EAAE,MAAM,IAAIF,cAAa,cAAA,CAAC,GAAG,EAAE,CAAC,aAAa,EAAEE,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;QACtH,CAAC;QAED,MAAMW,mBAAmB,GAAc,MAAM,IAAI,CAACX,OAAO,CAACY,MAAM,CAAC;YAAEZ,OAAO,EAAEA,OAAO;SAAE,EAAE;YAAES,UAAU,EAAEA,UAAU;SAAE,CAAC,AAAC;QACnH,IAAI,CAACE,mBAAmB,EAAE,MAAM,IAAIb,cAAa,cAAA,CAAC,GAAG,EAAE,uBAAuB,CAAC,CAAC;QAEhF,OAAOa,mBAAmB,CAAC;IAC7B;UAEaE,UAAU,CAACb,OAAe,EAAkB;QACvD,MAAMc,mBAAmB,GAAc,MAAM,IAAI,CAACd,OAAO,CAACe,MAAM,CAAC;YAAEf,OAAO,EAAEA,OAAO;SAAE,CAAC,AAAC;QACvF,IAAI,CAACc,mBAAmB,EAAE,MAAM,IAAIhB,cAAa,cAAA,CAAC,GAAG,EAAE,uBAAuB,CAAC,CAAC;QAEhF,OAAOgB,mBAAmB,CAAC;IAC7B;;QA5CA,KAAOd,OAAO,GAAGgB,aAAY,QAAA,AAAC,CAAA;;CA6C/B;MAED,QAA8B,GAAfvB,cAAc"}